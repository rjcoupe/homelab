---
kubernetes_version: '1.23'

kubernetes_pod_network:
  cidr: '10.244.0.0/16'

kubernetes_kubeadm_kubelet_config_file_path: "/etc/kubernetes/kubeadm-kubelet-config.yaml"

kubernetes_version_kubeadm: "stable-{{ kubernetes_version }}"

kubernetes_config_kubelet_configuration:
  cgroupDriver: "systemd"

kubernetes_config_init_configuration:
  localAPIEndpoint:
    advertiseAddress: "{{ kubernetes_apiserver_advertise_address | default(ansible_default_ipv4.address, true) }}"

kubernetes_config_cluster_configuration:
  networking:
    podSubnet: "{{ kubernetes_pod_network.cidr }}"
  kubernetesVersion: "{{ kubernetes_version_kubeadm }}"

kubernetes_config_kube_proxy_configuration: {}

kubernetes_kubeadm_init_extra_opts: ""

preinstall:
  helm:
    - repo: https://metallb.github.io/metallb
      chart_ref: metallb/metallb
      name: metallb
  
  # - https://storage.googleapis.com/tekton-releases/pipeline/latest/release.yaml                       #Â Tekton